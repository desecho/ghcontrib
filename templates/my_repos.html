{% extends 'base.html' %}
{% load i18n static %}

{% block content %}
  <div>
    <form v-on:submit.prevent="addRepo">
      <input required v-model="name" type="text" pattern=".+/.+" title="user/project" class="form-control col-3"
             placeholder="user/project">
      <br>
      <button type="submit" class="btn btn-primary col-3">{% trans 'Add' %}</button>
    </form>
    <br>
    <button class="btn btn-primary col-3"
            v-on:click="loadCommitData">{% trans 'Load / Update commits' %}</button>
    <br><br>
    <div v-cloak>
      <div v-for="repo in repos">[[ repo.name ]] <a href="javascript:void(0)"
                                                   v-on:click="deleteRepo(repo.id)"><i
        class="fa fa-trash"></i></a></div>
    </div>
  </div>
{% endblock %}

{% block js %}
  <script>
    'use strict';

    urls.urlRepo = '{% url 'repo' %}';
    urls.urlLoadCommitData = '{% url 'load_commit_data' %}';
    vars.repos = JSON.parse('{{ repos|safe }}');
  </script>
  <script src="{% static 'js/myRepos.js' %}"></script>
{% endblock %}
