{% extends 'base.html' %}

{% load i18n %}
{% load static %}

{% block content %}

<div id="my-repos-controller" ng-controller="MyReposController">

<input ng-model="name" type="text" class="form-control col-3" placeholder="user/project">
<br>
<button type="submit" class="btn btn-primary col-3" ng-click="addRepo()">{% trans 'Add' %}</button>
<button type="submit" class="btn btn-primary col-3" ng-click="loadCommitData()">{% trans 'Load / Update commits' %}</button>
<br><br>

<div id="repos" style="display: none">
  <div ng-repeat="repo in repos">[[ repo.name ]] <a href="javascript:void(0)" ng-click="deleteRepo($event)"><i data-id="[[ repo.id ]]" class="fa fa-trash"></i></a></div>
</div>

</div>
{% endblock %}

{% block js %}
<script>
  const urlDeleteRepo = '{% url 'delete_repo' %}';
  const urlAddRepo = '{% url 'add_repo' %}';
  const urlLoadCommitData = '{% url 'load_commit_data' %}';
  const repos = $.parseJSON('{{ repos|safe }}');
</script>
<script src="{% static 'js/my_repos.js' %}"></script>
{% endblock %}
