{% extends 'base.html' %}
{% load i18n static %}

{% block content %}
  <div ng-controller="PreferencesController as preferences">
    <form class="form-horizontal">
      <legend>{% trans 'Settings' %}</legend>
      <br>
      <div class="form-group row" ng-cloak>
        <label class="col-form-label col-sm-2" for="lang">{% trans 'Language' %}:</label>
        <div class="col-sm-10">
          {% get_available_languages as LANGUAGES %}
          {% get_language_info_list for LANGUAGES as languages %}
          {% for language in languages %}
            <label class="radio mr-2 col-form-label">
              <input type="radio" ng-model="preferences.language" ng-change="preferences.save(true)" name="lang"
                     value="{{ language.code }}"> {{ language.name_local }}
            </label>
          {% endfor %}
        </div>
      </div>
    </form>
  </div>
{% endblock %}

{% block js %}
  <script>
    'use strict';

    urls.urlSavePreferences = '{% url 'save_preferences' %}';
    vars.language = '{{ user.language }}';
  </script>
  <script src="{% static 'js/preferences.js' %}"></script>
{% endblock %}
